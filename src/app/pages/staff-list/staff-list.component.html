<div class="max-w-7xl mx-auto px-4 py-4">
  <div class="flex items-center justify-between mb-4">
    <h2 class="text-2xl font-semibold text-[#0F3F7A]">
      Funcionarios
    </h2>
    <a
      routerLink="/"
      class="inline-flex items-center rounded-md border px-3 py-2 text-[#0F3F7A] hover:bg-gray-50"
    >
      Inicio
    </a>
  </div>

  <input
    class="w-full border rounded-md px-3 py-2 mb-4"
    placeholder="Buscar nombre o ubicación..."
    [(ngModel)]="q"
  />

  <ng-container *ngIf="list$ | async as list; else cargando">
    <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3">
      <div
        *ngFor="let p of list"
        [hidden]="q && !(p.nombre + ' ' + (p.ubicacion || '')).toLowerCase().includes(q.toLowerCase())"
      >
        <a
          class="block h-full bg-white rounded-xl shadow hover:shadow-md transition-shadow text-inherit no-underline"
          [routerLink]="['/perfil', p.id]"
        >
          <div class="p-3">
            <img
              [src]="p.fotoUrl || 'assets/img/placeholder.png'"
              class="w-full h-[140px] object-contain rounded-lg"
              alt=""
            />
          </div>
          <div class="px-4 pb-4 text-center">
            <h5 class="text-base font-semibold text-gray-900 mb-1">{{ p.nombre }}</h5>
            <p class="text-xs text-gray-500 mb-0">{{ p.ubicacion || ' ' }}</p>
          </div>
        </a>
      </div>
    </div>

    <div class="text-gray-500 mt-3" *ngIf="list.length === 0">
      No hay funcionarios en esta categoría.
    </div>
  </ng-container>

  <ng-template #cargando>
    <div class="text-gray-500">Cargando…</div>
  </ng-template>

  <div class="text-xs text-gray-500 mt-3">
    Total: {{ (list$ | async)?.length || 0 }}
  </div>
</div>
